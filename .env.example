# =============================================================================
# ProbotSharp Local Development Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit the .env file to version control

# =============================================================================
# GitHub App Configuration (REQUIRED)
# =============================================================================
# Your GitHub App ID from https://github.com/settings/apps
PROBOTSHARP_GITHUB_APPID=123456

# Webhook secret for validating webhook payloads
PROBOTSHARP_WEBHOOK_SECRET=your-webhook-secret-here

# GitHub App Private Key - use one of these methods:
# Option 1: Path to private key file (mounted as volume in docker-compose.yml)
PROBOTSHARP_GITHUB_PRIVATEKEY=/app/private-key.pem
# Option 2: Base64 encoded private key (uncomment and use instead of file path)
# PROBOTSHARP_GITHUB_PRIVATEKEY=LS0tLS1CRUdJTi...

# Optional: OAuth credentials if using GitHub OAuth
PROBOTSHARP_GITHUB_CLIENTID=
PROBOTSHARP_GITHUB_CLIENTSECRET=

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
POSTGRES_USER=probotsharp
POSTGRES_PASSWORD=dev-password
POSTGRES_DB=probotsharp
POSTGRES_PORT=5432

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_PORT=6379
PROBOTSHARP_CACHE_USE_REDIS=true
PROBOTSHARP_CACHE_REDIS_CONNECTION=redis:6379
PROBOTSHARP_IDEMPOTENCY_USE_REDIS=true
PROBOTSHARP_IDEMPOTENCY_REDIS_CONNECTION=redis:6379

# =============================================================================
# API Configuration
# =============================================================================
API_PORT=8080
ASPNETCORE_ENVIRONMENT=Development

# =============================================================================
# Database Settings
# =============================================================================
PROBOTSHARP_DB_ENABLE_SENSITIVE_LOGGING=false
PROBOTSHARP_DB_ENABLE_DETAILED_ERRORS=true
PROBOTSHARP_DB_COMMAND_TIMEOUT=30
PROBOTSHARP_DB_MAX_RETRY_COUNT=3
PROBOTSHARP_DB_MAX_RETRY_DELAY=30

# =============================================================================
# Cache Settings
# =============================================================================
PROBOTSHARP_CACHE_DEFAULT_EXPIRATION=60
PROBOTSHARP_CACHE_TOKEN_EXPIRATION=50

# =============================================================================
# Idempotency Settings
# =============================================================================
PROBOTSHARP_IDEMPOTENCY_EXPIRATION_HOURS=24
PROBOTSHARP_IDEMPOTENCY_CLEANUP_INTERVAL=60

# =============================================================================
# Replay Queue Settings
# =============================================================================
PROBOTSHARP_REPLAY_USE_FILESYSTEM=true
PROBOTSHARP_REPLAY_PATH=/app/replay-queue
PROBOTSHARP_REPLAY_MAX_RETRIES=3
PROBOTSHARP_REPLAY_RETRY_DELAY=1000
PROBOTSHARP_REPLAY_POLL_INTERVAL=1000

# =============================================================================
# Dead Letter Queue Settings
# =============================================================================
PROBOTSHARP_DLQ_PATH=/app/dead-letter-queue
PROBOTSHARP_DLQ_RETENTION_DAYS=7

# =============================================================================
# Metrics & Observability
# =============================================================================
PROBOTSHARP_METRICS_USE_OTEL=false
PROBOTSHARP_METRICS_METER_NAME=ProbotSharp
PROBOTSHARP_METRICS_VERSION=1.0.0
PROBOTSHARP_METRICS_OTLP_ENDPOINT=

# =============================================================================
# Resilience Settings (HTTP Client)
# =============================================================================
PROBOTSHARP_HTTP_TIMEOUT=30

# Circuit Breaker
PROBOTSHARP_CB_FAILURE_RATIO=0.5
PROBOTSHARP_CB_MIN_THROUGHPUT=5
PROBOTSHARP_CB_BREAK_DURATION=30
PROBOTSHARP_CB_SAMPLING_DURATION=60

# Retry Policy
PROBOTSHARP_RETRY_MAX_ATTEMPTS=3
PROBOTSHARP_RETRY_BASE_DELAY=2
PROBOTSHARP_RETRY_MAX_DELAY=30
PROBOTSHARP_RETRY_USE_JITTER=true

# =============================================================================
# Feature Flags
# =============================================================================
PROBOTSHARP_FEATURE_WEBHOOK_REPLAY=true
PROBOTSHARP_FEATURE_METRICS=false
PROBOTSHARP_FEATURE_HEALTH_CHECKS=true
PROBOTSHARP_FEATURE_DETAILED_ERRORS=true

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL_DEFAULT=Information
LOG_LEVEL_ASPNETCORE=Warning
LOG_LEVEL_EF=Warning
LOG_LEVEL_PROBOTSHARP=Debug

# =============================================================================
# Smee.io Webhook Proxy (Optional - for local webhook testing)
# =============================================================================
# Get a URL from https://smee.io/ and uncomment to enable
# Start with: docker-compose --profile smee up
# SMEE_URL=https://smee.io/your-unique-channel

# =============================================================================
# Private Key File Path (Optional)
# =============================================================================
# Path to your private key file on the host machine (will be mounted to /app/private-key.pem)
PROBOTSHARP_PRIVATE_KEY_FILE=./private-key.pem
